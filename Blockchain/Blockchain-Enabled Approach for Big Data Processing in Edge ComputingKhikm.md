# Blockchain-Enabled Approach for Big Data Processing in Edge Computing

> 引用了 《Stochastic Blockchain for IoT Data Integrity》

****

## Introduction

边缘计算引入分布式计算范式：解决延迟问题

区块链引入分布式计算范式：解决安全问题

物联网设备迅速增长，中心化的计算无法满足需求。边缘计算通过将计算任务转移到分布式边缘节点来缓解中心服务器的压力。边缘计算极大地减少了集中式云中的带宽并动态分配任务，它通过在本地边缘节点中的快速计算减少端到端延迟，在本地管理数据。这实现了**边缘节点之间**的新型数据通信，其中中央云不发挥关键作用。这个好处引入了新的挑战。边缘计算在**动态边缘节点之间广播数据**时，在**数据完整性、可用性和安全性方面**面临严重的问题。

传统上，边缘节点在向网络广播后无法控制数据的完整性。因此，恶意节点可能会潜在地威胁边缘计算的可靠性。在物联网数据处理中需要消除这些风险，因为隐私是最关键的要求之一。

由于某些限制，区块链的纯粹分布式特性并不是最适合环境的：

* 首先，物联网数据规模迅速达到 TB，因此维护区块链节点的成本将急剧增加以存储区块链数据

* 其次，大数据处理会创建大块（千兆字节），其中验证和传播延迟在边缘计算中是不可接受的

* 此外，当数据不如加密货币交易有价值时，将相同的物联网数据复制到所有节点将浪费存储资源

针对这些限制，本研究提出了一种称为 Recordchain 的新型区块链架构来处理**分布式边缘节点之间**的大数据

为此，Recordchain 分离了实际数据，使**面向哈希**的边缘网络能够实现高验证性能和存储利用率

> 面向哈希是什么东西

最后使得所有节点能够通过存储在 Recordchain 中的 hash 来获取存储的共享数据

此外，Recordchain 从现有概念中采用了修改后的轻量级实现，例如记录验证共识中的实用拜占庭容错和集体签名

它还通过引用具有唯一集体签名的数据来保证哈希网络和共享存储中的数据安全性和可扩展性

主要贡献：

* 一种称为共享存储的新型数据单元可以在动态边缘节点之间进行大数据处理

* 轻量级记录验证共识增加了记录批准吞吐量，与新块生成延迟无关

* 一种用于唯一且不可替代的集体签名生成的新算法保证了共享存储中的数据安全性和引用完整性

* 共享存储替换算法在发生意外故障时提供网络可持续性

### 相关工作

* Groupchain《Groupchain: Towards a scalable  public blockchain in fog computing of IoT services computing》
  
  部署了一个带有领导小组的双链结构来提升交易吞吐量。每一个领导者有权不进行 PoW 直接创建一个副块。因此，交易能够没有延迟地被直接写入到新的块中。
  
  但是，所有领导小组的成员必须再每个副块加入原始的 Groupchain之前验证这个副块。

* Conflux
  
  当海量物联网数据增加网络负载时，这种方法并没有提供显著的优势

* 《Edge computing  and caching based blockchain IoT network》
  
  为物联网数据应用了一个安全的区块链网络，使用边缘计算资源进行海量计算

* 《Stochastic blockchain for IoT data integrity》和 《lockchain based data integrity verification for large-scale IoT data》
  
  介绍了使用区块链及其安全协议的大规模物联网数据的数据完整性系统

尽管这些方法专注于提高物联网数据系统的可靠性，但它们的范围有限，因为无论数据大小如何，都存在安全和性能问题

还有其他关注特殊领域的研究

* 《Managing IoT devices using blockchain platform》和 《Blockchain as a service for IoT》
  
  设计了安全的区块链网络作为管理 IoT 设备的服务

* 《Blockchain for IoT security and privacy: The case study of a smart home》和《BlockChain:  A distributed solution to automotive security and privacy》
  
  讨论了区块链能给智能家居和车联网带来的好处

* 《Blockchain-driven IoT for food traceability with an integrated consensus mechanism》
  
  基于区块链的食品追踪技术方法

但是，考虑到边缘计算和海量数据通信，它们都无法处理繁重的工作负载

可以得出以下结论

* 当实现区块链相关系统时，IoT 数据大小是一个挑战

* 大多数研究在其特定的方法下都取得了较好的结果，但是在大数据系统下都会受到影响，尤其是在单一交易规模增加的情况下

### 背景和动机

> 《Foundations and evolution of modern computing paradigms: Cloud, IoT, edge, and fog》
> 
> 《Convergence of edge computing and deep learning: A comprehensive survey》
> 
> 《Collaborative cloud and edge computing for latency minimization》

上面的研究证明，集中式数据计算可能不再能够满足当前用户交互应用程序的需求

边缘计算相对于集中式云计算具有巨大优势，包括以下几点：

* 端到端时延
  
  边缘计算在本地边缘节点上执行数据计算。这种方法大大减少了终端设备发出的每个请求的延迟

* 速度
  
  边缘服务器的地理位置接近的位置大大提高了数据传输速度

* 可扩展性
  
  随着对更多计算能力的需求增加，边缘计算很容易扩展。这一优势使边缘计算能够根据位置适应不同的环境

* 花费
  
  与构建大型数据中心相比，边缘节点的实施成本要低得多。不仅硬件成本更低，土地使用成本也更低。因此，使用低成本的嵌入式设备和定制位置可以降低系统费用

* 过滤
  
  边缘节点还可以作为控制物联网数据的天然过滤器。由于物联网设备会产生大量数据，并非所有信息都值得长期存储。边缘设备仅广播过滤后的数据，从而降低系统负载

IoT 设备发送给边缘节点的数据可以分为以下两类：

* short-term data （短期数据）
  
  不再相关的短期数据会被删除

* long-term data  （长期数据）
  
  长期数据在整个网络中起着至关重要的作用
  
  边缘节点向网络广播长期数据以提高可靠性
  
  数据传播任务是边缘环境实施中的新挑战

安全问题：

边缘计算将数据计算带到更靠近物联网设备的位置，以在大数据处理中实现更快的通信。边缘节点在本地整理敏感数据，与云计算相比，增强了客户端设备的安全性。然而，边缘计算仍然存在与大数据相关的严重安全问题：

* Data Protection/Recovery Risks （数据保护/恢复风险）
  
  与云计算相比，本地数据处理可以降低数据保护风险。然而，边缘节点仍然依赖独立的本地数据库来存储物联网数据。由于边缘计算依赖于单一的存储处理，所有数据都可能丢失甚至被盗

* Networking Risk （网络风险）
  
  边缘节点不断地将分类数据卸载到中央云。中间件攻击者可以访问和修改这一一次性过程

* Scalability Risk （可扩展性风险）
  
  由于边缘计算建立在分散的异构网络上，因此存在来自恶意节点的安全风险。中央云通常难以跟踪所有节点。如果恶意软件成功上传到中央云，恶意节点很容易破坏网络

边缘计算提供商通常依赖于私有网络，只有受信任和可靠的节点才能构建网络。因此，实施成本可能高于集中计算

> 分布式网络使用的另一种常用技术是使用集体签名共识 (CSC) 来保护数据
> 
> 《Keeping authorities“Honest or Bust” with decentralized witness cosigning》
> 
> 集体签名实现了比 PoW 更快的吞吐量，领先的现代区块链项目，如 SklCoin：
> 
> 《SklCoin: Toward  a scalable proof-of-stake and collective signature based consensus  protocol for strong consistency in blockchain,》

群体签名的主要步骤：

* Announcement
  
  领导节点广播需要签名的消息

* Commitment
  
  网络中的每个节点都会生成一个随机数作为承诺的标志，并将其发送回领导者
  
  在收到足够数量的承诺后，领导者计算聚合掩码以再次为第三阶段广播

* Challenge
  
  从领导者那里收到掩码后，节点使用哈希函数计算集体挑战。然后将计算结果返回给领导者

* Response
  
  在领导者从节点收到足够的响应后，它会计算聚合的集体签名。最终签名在网络上发布

与 PoW 相比，集体签名生成过程消耗的能量更少，从而导致更快的块生成性能。然而，这种技术仍然不能用于交易的独立验证。等待集体挑战计算和两个广播消息会给边缘计算环境中的客户端带来不可接受的端到端延迟。



Recordchain （记录区块链）架构：

由于运行环境是边缘计算，多功能边缘节点主要执行物联网设备请求并通过 Recordchain 网络广播长期数据

Recordchain 通过将数据与 P2P 网络分离来解决大数据处理问题，为此，Recordchain 使用了一个称为**共享存储**的节点

在将实际数据存储在共享存储中时，生成的哈希在 Recordchain 网络中共享

由于数据不会广播到网络，并且任何类型的数据的哈希大小都是相同的，因此 Recordchain 可以应用于任何大数据处理系统

与传统区块链不同，Recordchain 能够包含多媒体文件、地理定位相关数据、数字化资产、可变大小的传感器数据以及任何其他可以使用哈希函数进行指纹识别的数据

Recordchain 采用轻量级记录验证和集体签名生成技术，无需繁重的计算和持续的消息交换

借助轻量级共识，Recordchain 可以轻松容纳低成本的物联网设备，使其适用于边缘计算

由于数据不同于传统区块链中的数据，Recordchain 采用了一种新的数据类型，即记录，作为共享网络中的单单元数据

记录是散列、集体签名和元数据的集合。通过记录验证共识，每条记录都在网络中得到验证，与块生成延迟无关

关于上面解释的数据分离技术，Recordchain 与传统区块链相比具有三个主要优势：

* Scalability （可扩展性）

* Utilization （利用率）

* Performance （性能）



Shared Storage （共享存储）

在设计 Recordchain 的时候着重考虑共享存储的主要特征，例如可用性、恢复和性能

* 硬件单元和共享存储的网络连接应该始终可供访问

* 共享存储应具有在系统发生故障时自行恢复的功能

* 读写性能

考虑到上述所有因素，本研究使用云服务提供商 (CSP) 设计了一个共享存储系统。亚马逊网络服务 (AWS) EC2 本地实例用作原型，因为它是最有前途的可用服务之一。亚马逊提供了一个很有前途的解决方案来解决上述要求，并且在安全分析部分讨论了数据恢复的详细讨论

> ？？？
> 
> 讲了半天最重要的共享存储用的是别人的产品

另一个挑战是设计共享存储的内部结构

任何对数据的额外操作或预处理都会造成延迟，而延迟决定了 Recordchain 乃至整个系统的吞吐量。

为了避免预处理延迟，采用了不执行任何计算的单一用途共享存储。共享存储仅运行一个数据库实例，可从 Recordchain 网络直接访问。换句话说，边缘节点直接把数据写入共享存储数据库

最后的挑战是为中央存储部署最合适的数据库，本文选取了 key-value 存储

Recordchain 的好处是双重的：

* key-value 存储明显快于其他类型

* 通过唯一键引用消除了在共享存储中进行预处理的需求

如前所述，Recordchain 将集体签名与实际数据一起保存。集体签名是特定节点生成的唯一标识，可以作为唯一的数据密钥，无需进行数据操作
